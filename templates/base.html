{% load static i18n %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel='stylesheet' href='{% static "css/styles.css" %}'>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
    <title>{% block page_title %}{% endblock %}</title>
</head>
<body class='text-gray-800 mt-24 font-light'>
    {% include 'partials/messages.html' %}
    <header class='container max-w-full inset-0 flex items-center justify-between px-6 h-20 border-b border-gray-400 fixed bg-white'>
        <div class='flex items-center w-1/3'>
            <a href='{% url "common:home" %}' class='mr-6'>
                <img class='w-8' src='{% static "img/logo.png" %}' />
            </a>
            {% block search_bar %}
            <form method='get' action='{% url "rooms:search" %}' class='w-9/12'>
                <input 
                    class='search-box border px-5 w-full font-medium text-gray-900 placeholder-gray-600 py-3 rounded-full shadow-md hover:shadow-lg focus:outline-none'
                    name='city' 
                    placeholder="{% trans 'Search by City' %}" 
                />
            </form>
            {% endblock %}
        </div>
        {% include 'partials/nav.html' %}
    </header>

    {% block content %}{% endblock %}


    {% include 'partials/footer.html' %}

    <script>
        const locale_modal = document.getElementById('locale-modal');
        const locale_btn = document.getElementById('locale-btn');
        const eng_btn = document.getElementById('eng-btn');
        const kor_btn = document.getElementById('kor-btn');
        const locale_close = document.getElementById('locale-close');
        const currency_modal = document.getElementById('currency-modal');
        const currency_btn = document.getElementById('currency-btn');
        const usd_btn = document.getElementById('usd-btn');
        const krw_btn = document.getElementById('krw-btn');
        const currency_close = document.getElementById('currency-close');
        locale_btn.onclick = () => {
            locale_modal.style.display = 'block';
        }
        locale_close.onclick = () => {
            locale_modal.style.display = '';
        }
        eng_btn.onclick = () => {
            fetch(`{% url 'users:switch-language' %}?lang=en`).then(() => window.location.reload());
        }
        kor_btn.onclick = () => {
            fetch(`{% url 'users:switch-language' %}?lang=ko`).then(() => window.location.reload());
        }
        currency_btn.onclick = () => {
            currency_modal.style.display = 'block';
        }
        currency_close.onclick = () => {
            currency_modal.style.display = '';
        }
        usd_btn.onclick = () => {
            fetch(`{% url 'users:switch-currency' %}?currency=en`).then(() => window.location.reload());
        }
        krw_btn.onclick = () => {
            fetch(`{% url 'users:switch-currency' %}?currency=ko`).then(() => window.location.reload());
        }
        window.onclick = (e) => {
            if (e.target == locale_modal) {
                locale_modal.style.display = '';
            } else if (e.target == currency_modal) {
                currency_modal.style.display = '';
            }
        }
    </script>
</body>
</html>